import scope::*;
import fmt::StringBuilder;

emit_unary :: fn(inst: str, operand: Value, code: *mut fmt::StringBuilder, comment: *const str) {
  if comment {
    code.appendf("% % ; %\n", (inst, operand.to_string(), *comment), FormatOptions::default());
  } else {
    code.appendf("% %\n", (inst, operand.to_string()), FormatOptions::default());
  }
}

emit_binary :: fn(inst: str, dest: Value, src: Value, code: *mut fmt::StringBuilder, comment: *const str) {
  if comment {
    code.appendf("% %, % ; %\n", (inst, dest.to_string(), src.to_string(), *comment), FormatOptions::default());
  } else {
    code.appendf("% %, %\n", (inst, dest.to_string(), src.to_string()), FormatOptions::default());
  }
}

emit_nullary :: fn(inst: str, code: *mut fmt::StringBuilder, comment: *const str) {
  if comment {
    code.appendf("% ; %\n", (inst, *comment), FormatOptions::default());
  } else {
    code.appendf("%\n", (inst,), FormatOptions::default());
  }
}